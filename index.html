<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Happy Birthday Harshi</title>

<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
body { margin: 0; overflow: hidden; font-family: Arial; }
#ui {
  position: fixed;
  bottom: 10px;
  width: 100%;
  text-align: center;
  color: white;
  background: rgba(0,0,0,0.6);
  padding: 8px;
  z-index: 2;
  font-size: 16px;
  transition: opacity 0.3s;
}
#musicBtn {
  position: fixed;
  top: 10px;
  left: 10px;
  background: #111;
  color: #fff;
  padding: 8px 12px;
  border-radius: 6px;
  z-index: 2;
  cursor: pointer;
}
#zoom {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.95);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 5;
  transition: opacity 0.3s;
}
#zoom img {
  max-width: 95%;
  max-height: 95%;
  border-radius: 8px;
  box-shadow: 0 0 15px rgba(255,255,255,0.4);
  transition: transform 0.3s;
}
</style>
</head>

<body>

<div id="ui">ðŸ“· Swipe â€¢ Double-tap to zoom â€¢ Photo <span id="index">1 / 6</span></div>
<div id="musicBtn">ðŸŽµ Play Music</div>

<div id="zoom"><img></div>

<a-scene embedded vr-mode-ui="enabled:false"
  arjs="sourceType:webcam; debugUIEnabled:false;">

<a-assets>
  <img id="img1" src="images/photo1.jpg">
  <img id="img2" src="images/photo2.jpg">
  <img id="img3" src="images/photo3.jpg">
  <img id="img4" src="images/photo4.jpg">
  <img id="img5" src="images/photo5.jpg">
  <img id="img6" src="images/photo6.jpg">
  <audio id="bgm" src="audio/music.mp3" preload="auto"></audio>
</a-assets>

<!-- MARKER MODE -->
<a-marker preset="hiro">
  <a-plane id="albumMarker"
    position="0 0 0"
    rotation="-90 0 0"
    width="1"
    height="0.75"
    material="shader:flat; opacity:1">
  </a-plane>
</a-marker>

<a-entity camera></a-entity>
</a-scene>

<script>
const photos = ["#img1","#img2","#img3","#img4","#img5","#img6"];
let current = 0;
const albumM = document.querySelector("#albumMarker");
const index = document.querySelector("#index");
const zoom = document.querySelector("#zoom");
const zoomImg = zoom.querySelector("img");
const music = document.querySelector("#bgm");
const musicBtn = document.querySelector("#musicBtn");
const ui = document.querySelector("#ui");

/* Set image with correct aspect ratio */
function setPhoto() {
  const imgEl = document.querySelector(photos[current]);
  imgEl.onload = () => {
    const ratio = imgEl.naturalWidth / imgEl.naturalHeight;
    albumM.setAttribute("width", 1);
    albumM.setAttribute("height", 1 / ratio);
  };
  albumM.setAttribute("src", photos[current]);
  index.textContent = `${current + 1} / ${photos.length}`;
  fadeUI();
}
setPhoto();

/* Fade effect */
function fade(el) {
  el.setAttribute("material","opacity:0");
  setTimeout(()=>el.setAttribute("material","opacity:1"),150);
}
function fadeUI() {
  ui.style.opacity = 0;
  setTimeout(()=>ui.style.opacity = 1, 150);
}

/* Swipe left/right */
let startX = 0;
window.addEventListener("touchstart", e => startX = e.touches[0].clientX);
window.addEventListener("touchend", e => {
  const dx = e.changedTouches[0].clientX - startX;
  if (Math.abs(dx) > 40) {
    current = (dx < 0) ? (current+1)%photos.length : (current+photos.length-1)%photos.length;
    fade(albumM);
    setPhoto();
  }
});

/* Double tap zoom with smooth scale */
let lastTap = 0;
function handleTap() {
  const now = Date.now();
  if (now - lastTap < 300) {
    zoom.style.display = "flex";
    zoom.style.opacity = 0;
    zoomImg.src = document.querySelector(photos[current]).src;
    setTimeout(()=>zoom.style.opacity=1, 50);
    zoomImg.style.transform = "scale(1.1)";
    setTimeout(()=>zoomImg.style.transform="scale(1)", 300);
  }
  lastTap = now;
}
albumM.addEventListener("click", handleTap);
zoom.addEventListener("click",()=>zoom.style.display="none");

/* Background music play/pause */
musicBtn.onclick = () => {
  if (music.paused) {
    music.play().catch(()=>{});
    musicBtn.textContent = "ðŸŽµ Pause Music";
  } else {
    music.pause();
    musicBtn.textContent = "ðŸŽµ Play Music";
  }
};
</script>

</body>
</html>